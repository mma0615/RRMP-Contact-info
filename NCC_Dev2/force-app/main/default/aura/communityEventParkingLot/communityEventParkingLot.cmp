<aura:component implements="forceCommunity:availableForAllPageTypes" access="global" controller="CustomParkingLotFormController">
    <aura:handler name="init" value="{!this}" action="{!c.doInit}" />
    <aura:attribute type="String" name="eventId" default="" /> <!--Event__Id__c-->
    <aura:attribute type="String" name="contactId" default="" /> <!--Event__Id__c-->
    <aura:attribute type="String" name="eventRecordId" default="" /><!--Event.Id-->
    <aura:attribute type="String" name="eventName" default="" />
    <aura:attribute type="String" name="firstname" default="" />
    <aura:attribute type="String" name="lastname" default="" />
    <aura:attribute type="String" name="email" default="" />
    <aura:attribute type="String" name="phone" default="" />
    <aura:attribute type="String" name="description" default="" />
    <aura:attribute type="String" name="location" default="" />
    <aura:attribute type="String" name="session" default="" />
    <aura:attribute type="String" name="type" default="" />
    <aura:attribute type="Boolean" name="showSpinner" default="false" />
    <aura:attribute type="List" name="sessionList" default="" />
    <aura:attribute type="List" name="types" default="" />
    <aura:attribute type="Object" name="parkingLots" default="" />
    <aura:attribute type="String" name="selectedSessionId"/>
    <aura:attribute name="columns" type="List"/>
    <aura:attribute name="errors" type="Object" default="[]"/>
    <aura:attribute name="draftValues" type="Object" default="[]"/>
    
    <aura:attribute type="String" name="commentTag" default="" />
    <aura:attribute type="String" name="commentMessage" default="" />
    <aura:attribute name="parkingPageTitle" type="String"/>
    
    <aura:attribute name="isFilter" type="Boolean" default="false" /> 
    <aura:attribute name="status_open" type="Boolean" default="true" />  
    <aura:attribute name="status_closed" type="Boolean" default="true" />  
    <aura:attribute name="type_issue" type="Boolean" default="true" />  
    <aura:attribute name="type_question" type="Boolean" default="true"  />  
    <aura:attribute name="type_comment" type="Boolean" default="true"  />   
    <aura:attribute name="startDate" type="Date"  />   
    <aura:attribute name="endDate" type="Date" />   
    
    <div>
        <div class="contactus-section contactus-top-section">
            <aura:if isTrue="{!v.showSpinner}">
                <div class="spinnerHolder">
                    <lightning:spinner alternativeText="Loading" size="small" />
                </div>
                
                <aura:set attribute="else">
                    <div class="float-left first">
                        <div class="contactus-section-title font-section-header no-min-max-height">{!v.parkingPageTitle}</div>
                    </div>
                    <div class="slds-grid slds-wrap contactus-container-outer">
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-1">
                            <div class="contactus-detail">
                                <!--//commented 0201231 JL bug fix#00641:Events - Parking Lot Item Entry -->
                                <!-- START -->
                                <!--
                            <div class="font-header">
                                {!v.eventName}
                            </div>
                            <div class="font-body">
                                <aura:if isTrue="{!v.location}">
                                Location: {!v.location}
                                </aura:if>
                                <aura:if isTrue="{!v.session}">
                                    <br/>
                                    Session:  {!v.session.sessionName}
                                </aura:if>
                                
                            </div>
                            <br/>
                            -->
                                <!--END-->
                                <div class="font-header">
                                    {!v.commentTag}Ask Team Change Management 

                                </div>
                                <div class="font-body">
                                    {!v.commentMessage}This page is a forum for submitting and reviewing Superuser program questions, topics, and comments. In addition to submitting items, you can refer to this page to see all Parking Lot items and their response. 

                                </div>
                            </div>
                        </div>
                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-1">
                            
                            <form action="/action_page.php" class="contactus-form">
                                <!-- START //commented 0201231 JL bug fix#00641:Events - Parking Lot Item Entry -->
                                <!-- Email -->
                                
                                <aura:if  isTrue="{!not($Browser.isPhone)}" >
                                    <div class="slds-grid slds-wrap">
                                        <div class="slds-col slds-size_1-of-2 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                            <div class="header-label">
                                                <label for="email">Email *</label>
                                            </div>
                                            <div class="input-text">
                                                <lightning:input label="hidden" type="email" id="email" name="email" value="{!v.email}" placeholder="john.doe@gmail.com" required="true" aura:id="contactUsForm" variant="label-hidden"/>
                                            </div>
                                            
                                            <!-- Session -->
                                            <div class="header-label">
                                                <label for="session">Session *</label>
                                            </div>
                                            <div class="input-text">
                                                <lightning:select label="hidden" name="session" aura:id="sessionInput"  required="true"  variant="label-hidden" onchange="{!c.handleSessionChange}">
                                                    <option value="">-----</option>
                                                    <!--//updated 0201230 JL bug fix#00601:Session Picklist -->
                                                    <!-- START -->
                                                    <!--
                                    <aura:iteration items="{!v.sessionList}" var="session">
                                        <option value="{!session.Id}" selected="{!session.selected}" text="{!session.Name}"></option>
                                    </aura:iteration>
         -->
                                                    <aura:iteration items="{!v.sessionList}" var="session">
                                                        <option value="{!session.recordId}" selected="{!session.selected}" text="{!session.sessionFullName}"></option>
                                                    </aura:iteration>
                                                    <!-- END -->
                                                </lightning:select>
                                            </div>
                                            
                                            <!-- Type -->
                                            <div class="header-label">
                                                <label for="Type">Type *</label>
                                            </div>
                                            <div class="input-text">
                                                <lightning:select label="hidden" name="type" value="{!v.type}" aura:id="typeInput"  required="true"  variant="label-hidden">
                                                    <option value="">-----</option>
                                                    <aura:iteration items="{!v.types}" var="type">
                                                        <option value="{!type}">{!type}</option>
                                                    </aura:iteration>
                                                </lightning:select>
                                            </div>
                                        </div>
                                        
                                        <div class="slds-col slds-size_1-of-2 slds-medium-size_1-of-2 slds-large-size_1-of-2">
                                            <!-- Description -->
                                            <div class="header-label">
                                                <label for="subject">Description *</label>
                                            </div>
                                            <div class="input-text">
                                                <lightning:textarea label="hidden" id="description" name="description" value="{!v.description}" placeholder="Description" required="true" aura:id="contactUsForm" variant="label-hidden"/>
                                            </div>
                                        </div>
                                    </div>
                                </aura:if>
                                
                                <aura:if  isTrue="{!$Browser.isPhone}" >
                                    <div class="slds-grid slds-wrap">
                                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-1">
                                            <div class="header-label">
                                                <label for="email">Email *</label>
                                            </div>
                                            <div class="input-text">
                                                <lightning:input label="hidden" type="email" id="email" name="email" value="{!v.email}" placeholder="john.doe@gmail.com" required="true" aura:id="contactUsForm" variant="label-hidden"/>
                                            </div>
                                        </div>
                                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-1">
                                            <!-- Session -->
                                            <div class="header-label">
                                                <label for="session">Session *</label>
                                            </div>
                                            <div class="input-text">
                                                <lightning:select label="hidden" name="session" aura:id="sessionInput"  required="true"  variant="label-hidden" onchange="{!c.handleSessionChange}">
                                                    <option value="">-----</option>
                                                    <aura:iteration items="{!v.sessionList}" var="session">
                                                        <option value="{!session.recordId}" selected="{!session.selected}" text="{!session.sessionFullName}"></option>
                                                    </aura:iteration>
                                                    <!-- END -->
                                                </lightning:select>
                                            </div>
                                        </div>
                                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-1">
                                            <!-- Type -->
                                            <div class="header-label">
                                                <label for="Type">Type *</label>
                                            </div>
                                            <div class="input-text">
                                                <lightning:select label="hidden" name="type" value="{!v.type}" aura:id="typeInput"  required="true"  variant="label-hidden">
                                                    <option value="">-----</option>
                                                    <aura:iteration items="{!v.types}" var="type">
                                                        <option value="{!type}">{!type}</option>
                                                    </aura:iteration>
                                                </lightning:select>
                                            </div>
                                        </div>
                                        <div class="slds-col slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-1">
                                            <!-- Description -->
                                            <div class="header-label">
                                                <label for="subject">Description *</label>
                                            </div>
                                            <div class="input-text">
                                                <lightning:textarea label="hidden" id="description" name="description" value="{!v.description}" placeholder="Description" required="true" aura:id="contactUsForm" variant="label-hidden"/>
                                            </div>
                                        </div>
                                    </div>
                                </aura:if>
                                
                                <div class="input-text submit-btn" align="center">
                                    <div class="btn-base btn-submit" onclick="{!c.handleSubmit}">Submit</div>
                                </div>
                                <!-- END //commented 0201231 JL bug fix#00641:Events - Parking Lot Item Entry -->
                            </form> 
                        </div>
                    </div>
                </aura:set>
            </aura:if>
        </div> 
    </div>
    <div>
        <aura:if  isTrue="{!not($Browser.isPhone)}" >
            <div class="parkinglot-table">
                <div>
                    <div class="sort-button">
                        <lightning:button variant="brand" label="Sort" title="Sort" onclick="{! c.toggleFilter }" iconName="utility:slider" />
                    </div>
                    
                    <aura:if isTrue="{!v.isFilter}">
                        <div class="parking-sort">
                            <!--<div class="slds-panel__header">
                                <h2 class="slds-panel__header-title slds-text-heading_small slds-truncate" title="Panel Header">Panel Header</h2>
                                <div class="slds-panel__header-actions">
                                    <button class="slds-button slds-button_icon slds-button_icon-small slds-panel__close" title="Collapse Panel Header">
                                        
                                        <span class="slds-assistive-text">Collapse Panel Header</span>
                                    </button>
                                </div>
                            </div>-->
                            <div class="slds-panel__body">
                                <div>
                                    <table class="filter-table">
                                    	<tr>
                                        	<td><span>Status</span></td>
                                        	<td><ui:inputCheckbox class="mycheckbox" aura:id="Status_Open" label="Open" value="{!v.status_open}" change="{!c.handleSort}"/></td>
                                        	<td><ui:inputCheckbox class="mycheckbox" aura:id="Status_Closed" label="Closed" value="{!v.status_closed}" change="{!c.handleSort}"/></td>
                                        </tr>
                                    	<tr>
                                        	<td><span>Type</span></td>
                                        	<td><ui:inputCheckbox class="mycheckbox" aura:id="Type_Issue" label="Issue" value="{!v.type_issue}" change="{!c.handleSort}"/></td>
                                        	<td><ui:inputCheckbox class="mycheckbox" aura:id="Type_Question" label="Question" value="{!v.type_question}" change="{!c.handleSort}"/></td>
                                        	<td><ui:inputCheckbox class="mycheckbox" aura:id="Type_Comment" label="Comment" value="{!v.type_comment}" change="{!c.handleSort}"/></td>
                                        </tr>
                                    	<tr>
                                        	<td><span>Date</span></td>
                                        	<td colspan="3">
                                                <div class="date-filter">
                                                    <lightning:input type="date" value="{!v.startDate}"  onchange="{!c.handleSort}" />
                                                    <lightning:input type="date" value="{!v.endDate}"  onchange="{!c.handleSort}" />
                                                </div>
                                            </td>
                                        </tr>
                                        
        
                                    </table>
                                </div>
                            </div>
                        </div>
                    </aura:if>
                </div>
                
                <lightning:datatable aura:id="dtTable"
                                     columns="{! v.columns }"
                                     data="{! v.parkingLots }"
                                     keyField="Id"
                                     errors="{! v.errors }"
                                     draftValues="{! v.draftValues }"
                                     onsave="{! c.handleSaveItems }"
                                     hideCheckboxColumn  = "true"
                                     />
            </div> 
        </aura:if>
        
        <aura:if  isTrue="{!$Browser.isPhone}" >
            <div class="mobile-p-table">
                <div class="mobile-parkinglot-header">
                	<span>Parking Lot Information</span>
                    <div class="sort-button">
                        <lightning:button variant="brand" label="Sort" title="Sort" onclick="{! c.toggleFilter }" iconName="utility:slider" />
                    </div>
                    
                </div>
                <aura:iteration items="{!v.parkingLots}" var="parkingLot">
                    <div class="mobile-parkinglot-table">
                        <div class="parkinglot-header2">
                            <div>
                                <div class="parkinglot-header2-left">
                                    <span><b>{!parkingLot.Name}</b></span>
                                </div>
                                <div class="parkinglot-header2-right">
                                    <span>{!parkingLot.Status__c}</span>
                                </div>
                            </div>
                            <div>                                
                                <div class="parkinglot-header2-left">
                                    <span>{!parkingLot.Session_Name}</span>
                                </div>
                                <div class="parkinglot-header2-right">
                                    <span>{!parkingLot.Type__c}</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="parkinglot-info2">  
                            <div>
                                <span><b>Description</b></span>
                            </div>
                            <div>
                                <span>{!parkingLot.Description__c}</span>
                            </div> 
                            <br />
                            <div>
                                <span><b>Resolution/Answer</b></span>
                            </div>
                            <div>
                                <span>{!parkingLot.Resolution_Answer__c}</span>
                            </div>
                        </div>
                        <!--<div class="parkinglot-header">
                            <span>Parking Lot Number <br />{!parkingLot.Name}</span>
                        </div>
                        <div class="parkinglot-info">
                            <div class="info-title"><b>Session:</b> {!parkingLot.Session_Name}</div>
                            <br/>
                            <div class="info-title"><b>Type:</b> {!parkingLot.Type__c}</div>
                            <br/>
                            <div class="info-title"><b>Description:</b> {!parkingLot.Description__c}</div>
                            <br/>
                            <div class="info-title"><b>Resolution/Answer:</b> {!parkingLot.Resolution_Answer__c}</div>
                            <br/>
                            <div class="info-title"><b>Status:</b> {!parkingLot.Status__c}</div>
                        </div>-->
                    </div>
                </aura:iteration>
            </div>
        </aura:if>
        
    </div> 
</aura:component>